# 实时刷新功能测试指南

## 测试目的
验证提示词管理器的实时刷新功能是否正常工作，确保在多个VS Code窗口中数据同步。

## 测试步骤

### 1. 基础功能测试
1. 按 F5 启动扩展开发主机
2. 在开发主机中打开提示词管理器面板
3. 创建几个测试提示词
4. 验证提示词是否正确显示

### 2. 文件监听测试
1. 打开两个VS Code窗口（原始窗口和扩展开发主机）
2. 在原始窗口中直接编辑 `prompts.json` 文件
3. 观察扩展开发主机中的提示词面板是否自动更新

### 3. 跨窗口同步测试
1. 在扩展开发主机中创建新提示词
2. 检查 `prompts.json` 文件是否更新
3. 在另一个窗口中打开同一个工作区
4. 验证新创建的提示词是否显示

### 4. 实时变化测试
1. 在一个窗口中修改提示词
2. 在另一个窗口中观察变化
3. 测试删除、编辑操作的同步

## 预期结果
- ✅ 文件变化能够被实时检测
- ✅ 界面能够自动刷新
- ✅ 多窗口之间数据同步
- ✅ 没有性能问题或内存泄漏

## 技术实现验证
我们实现了以下关键功能：

1. **文件监听器** (`vscode.workspace.createFileSystemWatcher`)
   - 监听 `prompts.json` 文件的变化
   - 自动触发数据重新加载

2. **事件发射器** (`vscode.EventEmitter`)
   - 当数据变化时发出事件
   - 通知UI组件进行刷新

3. **资源管理**
   - 正确注册和清理事件监听器
   - 避免内存泄漏

## 故障排除
如果刷新不工作：
1. 检查控制台是否有错误信息
2. 验证文件路径是否正确
3. 确认事件监听器是否正确注册
4. 检查dispose方法是否被正确调用 